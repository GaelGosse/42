#!/bin/sh

# lite
BLACK="\033[0;30m"
RED="\033[0;31m"
GREEN="\033[0;32m"
YELLOW="\033[0;33m"
BLUE="\033[0;34m"
PURPLE="\033[0;35m"
CYAN="\033[0;36m"
WHITE="\033[0;37m"

# bold color
BOLD_BLACK="\033[1;30m"
BOLD_RED="\033[1;31m"
BOLD_GREEN="\033[1;32m"
BOLD_YELLOW="\033[1;33m"
BOLD_BLUE="\033[1;34m"
BOLD_PURPLE="\033[1;35m"
BOLD_CYAN="\033[1;36m"
BOLD_WHITE="\033[1;37m"

# background
BACK_BLACK="\033[0;40m"
BACK_RED="\033[0;41;30m"
BACK_GREEN="\033[0;42;30m"
BACK_YELLOW="\033[0;43;30m"
BACK_BLUE="\033[0;44;30m"
BACK_PURPLE="\033[0;45;30m"
BACK_CYAN="\033[0;46;30m"
BACK_WHITE="\033[0;47;30m"

reset="\033[0m"

alias gcw='gcc -Wall -Wextra -Werror -g'
alias out='./a.out'

alias gcl='git clone'
alias norm='norminette -R CheckForbiddenSourceHeader'
alias c='clear'

alias z='source ~/.zshrc'
alias b='source ~/.bashrc'

alias set_rc='cp -f ~/42/.shortcut ~/.'
alias get_rc='cp -f ~/.shortcut ~/42/.'

# shortcut
function poush()
{
	date
	# take .shortcut at ~/.
	cp ~/.config/Code/User/snippets/c.json ~/42/
	cp -f ~/.shortcut ~/42/
	git add .
	git commit -m $1
	git push
}

function pull()
{
	date
	git pull && cp -f ~/42c.json ~/.config/Code/User/snippets/ && cp -f ~/42/.shortcut ~/
}

function cfg()
{
	a=$(pwd)
	cd && code .shortcut
	cd $a
}

function cpl()
{
	rm -f *.gch
	rm -f */*.gch
	gcc -Wall -Wextra -Werror $@ && ./a.out
}

function cpla()
{
	if [[ "$#" > 1 ]]; then
		echo "something wrong with args"
	else
		rm -f *.gch
		if [[ "${1/-*s}" != $1 ]]; then
			rm -f */*.gch
			gcc -Wall -Wextra -Werror *.c *.h */*.c */*.h && ./a.out
		fi
		if [[ "${1/-*m}" != $1 ]]; then
			make
		fi
		gcc -Wall -Wextra -Werror *.c *.h && ./a.out
	fi
}

# with args
function refresh()
{
	if [[ "$#" > 0 ]]; then
		while true; do
			rm -f *.gch
			gcc -Wall -Wextra -Werror $@ && ./a.out
			sleep 1
		done
	else
		echo "no args"
	fi
}

# all
function refresha()
{
	while true; do
		rm -f *.gch
		gcc -Wall -Wextra -Werror *.c *.h && ./a.out
		sleep 3
	done
}

# all sub
function refresh_all()
{
	while true; do
		rm -f *.gch && rm -f */*.gch
		gcc -Wall -Wextra -Werror *.c *.h */*.c */*.h && ./a.out
		sleep 1
	done
}

function clr()
{
	if [[ "${1/-f}" != $1 ]]; then
		rm -f *.gch
		clear
	else
		echo "Are you sure to clean all temporary files here and also in all subfolders ?"
		read -r b
		if [[ $b == "yes" || $b == "y" ]]; then
			rm -f *.gch
			rm -f a.out
			clear
		else
			echo "nothing happens"
		fi
	fi
}

function crt()
{
	if [[ ! -d "$1" ]]; then
		mkdir $1 && cd $1 && code . 
	else
		echo "$1 already exist"
	fi
}




# part test
function t1()
{
	# see all the args
	for var in "$@"
	do
		echo "$var"
	done
}

function t2()
{
	a="some long string"
    b="ri"
	# return the rest of the occurence
	echo $a | grep -o "$b.*"
}

function t3()
{
	# get args after the second
	echo "${@:2}"
	# get args after the third
	echo "${@:3}"
}

function t4()
{
	# get nbr of args
	echo "$#"
}

function t5()
{
	# check if there is something like "- * s"
	str="-ms"
	a1="${str/e}"
	a2="${str/m}"
	if [ "${str/e}" == $str ]; then
		echo "nothing"
	else
		echo "something here"
	fi
	if [ "${str/-*s}" == $str ]; then
		echo "nothing"
	else
		echo "something here"
	fi
}

function t6()
{
	# check if there is something like "- * m" in the 1st arg
	if [[ "${1/-*m}" != $1 ]]; then
		echo "there is m"
	else
		echo "nothing"
	fi
}

function t7()
{
	echo "${BASH_SOURCE}"
	echo "${BASH_SOURCE}"
}

function t8()
{
	echo $(if [[ $(free | wc -l) > 1 ]]; then echo on; else echo off; fi)
}

# google-chrome-stable https://pythontutor.com/c.html#mode=edit

function t11()
{
	if test -f "*.c"; then
		echo "ok"
	else
		echo "nothing"
	fi
}

function t12()
{
	FILES="/home/gael/*"
	for file in $FILES
	do
		dir="$(dirname "${file}")"
		filename="$(basename "${file}")"
		if [[ -f $file ]]; then
			echo -e "$GREEN $dir / $filename"
		elif [[ -d $file ]]; then
			echo -e "$CYAN $dir / $filename"
		else
			echo -e "$YELLOW $dir / $filename"
		fi
	done
}

# function t13()
# {
# 	each file
# 	for file in "$/."; do
# 		if [ -d $file ]
# 		then
# 				# do something directory-ish
# 		else
# 				if [ "$file" == "*.txt" ]       #  this is the snag
# 				then
# 						# do something txt-ish
# 				fi
# 		fi
# 	done;
# }